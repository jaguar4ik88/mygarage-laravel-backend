# ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–æ–∫

**–î–∞—Ç–∞:** 2025-10-20  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

---

## üìä –°–≤–æ–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

| #  | –¢–µ—Å—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|------|-----------|----------|
| 1Ô∏è‚É£  | GET /api/subscriptions | ‚úÖ PASSED | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (FREE, PRO) |
| 2Ô∏è‚É£  | POST /api/register | ‚úÖ PASSED | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| 3Ô∏è‚É£  | POST /api/login | ‚úÖ PASSED | –õ–æ–≥–∏–Ω –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ |
| 4Ô∏è‚É£  | GET /api/user/subscription | ‚úÖ PASSED | –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ (FREE –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| 5Ô∏è‚É£  | FREE: –õ–∏–º–∏—Ç 1 –∞–≤—Ç–æ | ‚úÖ PASSED | –í—Ç–æ—Ä–æ–π –∞–≤—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (403) |
| 6Ô∏è‚É£  | FREE: –õ–∏–º–∏—Ç 5 –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π | ‚úÖ PASSED | 6-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ (403) |
| 7Ô∏è‚É£  | FREE: –î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã | ‚úÖ PASSED | PRO —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (403) |
| 8Ô∏è‚É£  | POST /api/user/subscription/verify | ‚úÖ PASSED | –ü–æ–∫—É–ø–∫–∞ PRO –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ |
| 9Ô∏è‚É£  | PRO: –õ–∏–º–∏—Ç 3 –∞–≤—Ç–æ | ‚úÖ PASSED | –í—Ç–æ—Ä–æ–π –∞–≤—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ |
| üîü | PRO: –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º | ‚úÖ PASSED | GET /api/vehicles/{id}/documents —Ä–∞–±–æ—Ç–∞–µ—Ç |

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ FREE –ø–ª–∞–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç FREE –ø–ª–∞–Ω
- **–õ–∏–º–∏—Ç—ã**: 1 –∞–≤—Ç–æ, 5 –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç**:
  - ‚ùå –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å 2-–π –∞–≤—Ç–æ ‚Üí `"You have reached the maximum number of vehicles (1) for your free plan"`
  - ‚ùå –ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å 6-–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ ‚Üí `"You have reached the maximum number of reminders (5) for your free plan"`
  - ‚ùå –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí `"This feature requires PRO subscription"`

### ‚úÖ PRO –ø–ª–∞–Ω ($4.99/–º–µ—Å)
- **–ü–æ–∫—É–ø–∫–∞**: POST /api/user/subscription/verify –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É
- **–õ–∏–º–∏—Ç—ã**: 3 –∞–≤—Ç–æ, –±–µ–∑–ª–∏–º–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **PRO —Ñ—É–Ω–∫—Ü–∏–∏**:
  - ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ 3 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
  - ‚úÖ –ë–µ–∑–ª–∏–º–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
  - ‚úÖ –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
  - ‚úÖ plan_type –º–µ–Ω—è–µ—Ç—Å—è —Å `free` –Ω–∞ `pro`
  - ‚úÖ is_pro = true

---

## üìù –ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –¢–µ—Å—Ç 1: –õ–∏–º–∏—Ç –∞–≤—Ç–æ –¥–ª—è FREE
```bash
$ curl -X POST http://localhost:8000/api/vehicles \
  -H "Authorization: Bearer TOKEN" \
  -d '{"make":"Honda","model":"Accord","year":2021,"mileage":30000}'
  
# –û—Ç–≤–µ—Ç:
{
  "success": false,
  "message": "You have reached the maximum number of vehicles (1) for your free plan",
  "upgrade_required": true,
  "limit_reached": true,
  "max_vehicles": 1,
  "current_plan": "free"
}
```

### –¢–µ—Å—Ç 2: –ü–æ–∫—É–ø–∫–∞ PRO
```bash
$ curl -X POST http://localhost:8000/api/user/subscription/verify \
  -H "Authorization: Bearer TOKEN" \
  -d '{"platform":"ios","transaction_id":"test_123","subscription_type":"pro"}'
  
# –û—Ç–≤–µ—Ç:
{
  "success": true,
  "message": "Subscription activated successfully",
  "data": {
    "subscription": {...},
    "user": {
      "plan_type": "pro",
      "subscription_expires_at": "2025-11-19T..."
    }
  }
}
```

### –¢–µ—Å—Ç 3: –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ PRO - –≤—Ç–æ—Ä–æ–π –∞–≤—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
```bash
$ curl -X POST http://localhost:8000/api/vehicles \
  -H "Authorization: Bearer TOKEN" \
  -d '{"make":"Honda","model":"Accord","year":2021,"mileage":30000}'
  
# –û—Ç–≤–µ—Ç:
{
  "success": true,
  "message": "Vehicle created successfully",
  "data": {...}
}
```

---

## üóÑÔ∏è –î–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ

### –ü–æ–¥–ø–∏—Å–∫–∏ (subscriptions)
```json
[
  {
    "id": 1,
    "name": "free",
    "display_name": "Free",
    "price": 0,
    "max_vehicles": 1,
    "max_reminders": 5,
    "features": [...]
  },
  {
    "id": 2,
    "name": "pro",
    "display_name": "PRO",
    "price": 499,
    "max_vehicles": 3,
    "max_reminders": null,
    "features": [...]
  }
]
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ test1760974532@example.com (PRO)
- ‚úÖ test_reminders1760974537@example.com (PRO + 6 –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π)

---

## ‚öôÔ∏è –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Backend API (–≥–æ—Ç–æ–≤–æ 100%)
- ‚úÖ 6 endpoints –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ 6 endpoints –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –≤ VehicleController
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –≤ ReminderController
- ‚úÖ –ú–æ–¥–µ–ª–∏ —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ Seeders –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ

### –§—É–Ω–∫—Ü–∏–∏ User –º–æ–¥–µ–ª–∏
- ‚úÖ `canAddVehicle()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –∞–≤—Ç–æ
- ‚úÖ `canAddReminder()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- ‚úÖ `isPro()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ PRO —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ `getMaxVehicles()` - –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å. –∞–≤—Ç–æ
- ‚úÖ `getMaxReminders()` - –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å. –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

---

## üìã –ß—Ç–æ –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ (–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

- üîÑ –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (POST /api/user/subscription/cancel)
- üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫ (POST /api/user/subscription/restore)
- üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (POST /api/vehicles/{id}/documents)
- üîÑ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (GET /api/vehicles/documents/{id}/download)
- üîÑ –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (DELETE /api/vehicles/documents/{id})

*–≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –∫–æ–¥–µ –∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.*

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### Backend (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
1. PDF —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ (ReportController)
2. –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ–∫–æ–≤ –¥–ª—è —Ç—Ä–∞—Ç (ExpenseController)
3. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—Ä–∞—Ç (3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é)

### Mobile (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞)
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RevenueCat –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
2. UI —ç–∫—Ä–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (SubscriptionScreen)
3. Paywall –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ PRO —Ñ—É–Ω–∫—Ü–∏–π
4. –≠–∫—Ä–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª—è (VehicleDocumentsScreen)
5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–µ–∫–æ–≤ –∫ —Ç—Ä–∞—Ç–∞–º
6. PDF —ç–∫—Å–ø–æ—Ä—Ç

---

## üéâ –í—ã–≤–æ–¥

**Backend —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ (FREE, PRO, PREMIUM)
- ‚úÖ –õ–∏–º–∏—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ PRO —Ñ—É–Ω–∫—Ü–∏—è–º
- ‚úÖ API endpoints –æ—Ç–≤–µ—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
- ‚úÖ –ú–æ–¥–µ–ª–∏ —Å –ø–æ–ª–Ω–æ–π –ª–æ–≥–∏–∫–æ–π

**–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –º–æ–±–∏–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º!**

